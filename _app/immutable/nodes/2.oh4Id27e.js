import{t as y,a as D}from"../chunks/DlF8q3Yo.js";import{n as Z,aB as te,p as K,a as ne,j as L,m as u,k as v,s as b,g as d,t as M,ay as I,z as C,A as T,I as F,i as ae}from"../chunks/CHzOFP2n.js";import{b as se,p as B}from"../chunks/CGVEWKAh.js";import{o as E}from"../chunks/BYIwL07W.js";import"../chunks/rqdLuf-Z.js";import{l as re,s as H,e as oe}from"../chunks/D-TUPCoK.js";import{e as O,i as j,b as W,r as $}from"../chunks/B3FBhe4h.js";function G(e,t,n){if(e.multiple)return ce(e,t);for(var a of e.options){var s=A(a);if(te(s,t)){a.selected=!0;return}}(!n||t!==void 0)&&(e.selectedIndex=-1)}function ie(e,t){Z(()=>{var n=new MutationObserver(()=>{var a=e.__value;G(e,a)});return n.observe(e,{childList:!0,subtree:!0,attributes:!0,attributeFilter:["value"]}),()=>{n.disconnect()}})}function le(e,t,n=t){var a=!0;re(e,"change",s=>{var r=s?"[selected]":":checked",c;if(e.multiple)c=[].map.call(e.querySelectorAll(r),A);else{var l=e.querySelector(r)??e.querySelector("option:not([disabled])");c=l&&A(l)}n(c)}),Z(()=>{var s=t();if(G(e,s,a),a&&s===void 0){var r=e.querySelector(":checked");r!==null&&(s=A(r),n(s))}e.__value=s,a=!1}),ie(e)}function ce(e,t){for(var n of e.options)n.selected=~t.indexOf(A(n))}function A(e){return"__value"in e?e.__value:e.value}var ue=y('<div id="map" class="svelte-16jssmr"></div>');function de(e,t){K(t,!0);const n="AIzaSyADPUVze39G8j0r7DaeqhW3fM-f146LcY4";let a,s,r=null;E(async()=>{if(!window.google){const o=document.createElement("script");o.src=`https://maps.googleapis.com/maps/api/js?key=${n}&libraries=places`,o.async=!0,document.head.appendChild(o),await new Promise(i=>o.onload=i)}s=new window.google.maps.Map(a,{center:{lat:34.6545,lng:135.6005},zoom:10})}),ne(()=>{console.log(t.houses),c(t.houses)});async function c(o){const i=new window.google.maps.Geocoder;function g(m){return new Promise((p,h)=>{i.geocode({address:m},(x,_)=>{if(_==="OK"&&x&&x[0]){const f=x[0].geometry.location;p(f)}else h("住所の変換に失敗しました")})})}for(const m of o){const p="大阪府"+m.city+m.districtAddress;try{const h=await g(p),x=new window.google.maps.Marker({position:h,map:s,title:p}),_=new window.google.maps.InfoWindow({content:`
            <div style="background: white; color: #1e3a8a; padding: 10px; max-width: 250px; font-family: sans-serif;">
              <h2 style="font-size: 18px; margin-bottom: 8px;">${p}</h2>
              <img src="https://placehold.jp/50x50.png" style="width: 100%; height: auto; margin-bottom: 8px;" />
              <p><strong>価格:</strong> ${m.price}万円</p>
              <p><strong>築年数:</strong> ${m.constructedAt}</p>
              <button style="background-color: #1e3a8a; color: white; border: none; padding: 8px 12px; border-radius: 5px; margin-top: 10px; cursor: pointer;">
                この空き家を選択する
              </button>
            </div>
          `});x.addListener("click",()=>{r&&r.close(),_.open(s,x),r=_})}catch{console.error(`住所 "${p}" の緯度経度の取得に失敗しました。`)}}}var l=ue();se(l,o=>a=o,()=>a),D(e,l),L()}var pe=y('<div class="checkbox-item svelte-18t5lc3"><label class="svelte-18t5lc3"><input type="checkbox"> </label></div>'),fe=y('<div class="category svelte-18t5lc3"><div class="category-title svelte-18t5lc3"> </div> <div class="checkboxes svelte-18t5lc3"></div></div>'),ve=y('<div class="container svelte-18t5lc3"></div>');function me(e,t){let n=B(t,"categories",24,()=>[]);var a=ve();O(a,5,n,j,(s,r)=>{var c=fe(),l=v(c),o=v(l,!0);u(l);var i=b(l,2);O(i,5,()=>d(r).items,j,(g,m)=>{var p=pe(),h=v(p),x=b(v(h));u(h),u(p),M(()=>H(x,` ${d(m)??""}`)),D(g,p)}),u(i),u(c),M(()=>H(o,d(r).name)),D(s,c)}),u(a),D(e,a)}const ge="https://script.google.com/macros/s/AKfycbzJ9B_kRKnVI6YTFbajc3zGU2zSo2s46ZkcNQU6zeAhte1-R78mSSTINfTdPtQcHtYBQw/exec?target=houses",be=()=>fetch(ge).then(e=>e.json()),Q=6e4,J=36e5,P=Symbol.for("constructDateFrom");function R(e,t){return typeof e=="function"?e(t):e&&typeof e=="object"&&P in e?e[P](t):e instanceof Date?new e.constructor(t):new Date(t)}function z(e,t){return R(e,e)}function V(e,...t){const n=R.bind(null,t.find(a=>typeof a=="object"));return t.map(n)}function q(e,t){const n=+z(e)-+z(t);return n<0?-1:n>0?1:n}function xe(e,t,n){const[a,s]=V(n==null?void 0:n.in,e,t);return a.getFullYear()-s.getFullYear()}function he(e,t,n){const[a,s]=V(n==null?void 0:n.in,e,t),r=q(a,s),c=Math.abs(xe(a,s));a.setFullYear(1584),s.setFullYear(1584);const l=q(a,s)===-r,o=r*(c-+l);return o===0?0:o}function _e(e,t){const n=()=>R(t==null?void 0:t.in,NaN),s=ke(e);let r;if(s.date){const i=Ne(s.date,2);r=Ie(i.restDateString,i.year)}if(!r||isNaN(+r))return n();const c=+r;let l=0,o;if(s.time&&(l=Te(s.time),isNaN(l)))return n();if(s.timezone){if(o=Ae(s.timezone),isNaN(o))return n()}else{const i=new Date(c+l),g=z(0);return g.setFullYear(i.getUTCFullYear(),i.getUTCMonth(),i.getUTCDate()),g.setHours(i.getUTCHours(),i.getUTCMinutes(),i.getUTCSeconds(),i.getUTCMilliseconds()),g}return z(c+l+o)}const Y={dateTimeDelimiter:/[T ]/,timeZoneDelimiter:/[Z ]/i,timezone:/([Z+-].*)$/},we=/^-?(?:(\d{3})|(\d{2})(?:-?(\d{2}))?|W(\d{2})(?:-?(\d{1}))?|)$/,De=/^(\d{2}(?:[.,]\d*)?)(?::?(\d{2}(?:[.,]\d*)?))?(?::?(\d{2}(?:[.,]\d*)?))?$/,ye=/^([+-])(\d{2})(?::?(\d{2}))?$/;function ke(e){const t={},n=e.split(Y.dateTimeDelimiter);let a;if(n.length>2)return t;if(/:/.test(n[0])?a=n[0]:(t.date=n[0],a=n[1],Y.timeZoneDelimiter.test(t.date)&&(t.date=e.split(Y.timeZoneDelimiter)[0],a=e.substr(t.date.length,e.length))),a){const s=Y.timezone.exec(a);s?(t.time=a.replace(s[1],""),t.timezone=s[1]):t.time=a}return t}function Ne(e,t){const n=new RegExp("^(?:(\\d{4}|[+-]\\d{"+(4+t)+"})|(\\d{2}|[+-]\\d{"+(2+t)+"})$)"),a=e.match(n);if(!a)return{year:NaN,restDateString:""};const s=a[1]?parseInt(a[1]):null,r=a[2]?parseInt(a[2]):null;return{year:r===null?s:r*100,restDateString:e.slice((a[1]||a[2]).length)}}function Ie(e,t){if(t===null)return new Date(NaN);const n=e.match(we);if(!n)return new Date(NaN);const a=!!n[4],s=N(n[1]),r=N(n[2])-1,c=N(n[3]),l=N(n[4]),o=N(n[5])-1;if(a)return Me(t,l,o)?Se(t,l,o):new Date(NaN);{const i=new Date(0);return!ze(t,r,c)||!Ue(t,s)?new Date(NaN):(i.setUTCFullYear(t,r,Math.max(s,c)),i)}}function N(e){return e?parseInt(e):1}function Te(e){const t=e.match(De);if(!t)return NaN;const n=U(t[1]),a=U(t[2]),s=U(t[3]);return Ce(n,a,s)?n*J+a*Q+s*1e3:NaN}function U(e){return e&&parseFloat(e.replace(",","."))||0}function Ae(e){if(e==="Z")return 0;const t=e.match(ye);if(!t)return 0;const n=t[1]==="+"?-1:1,a=parseInt(t[2]),s=t[3]&&parseInt(t[3])||0;return Fe(a,s)?n*(a*J+s*Q):NaN}function Se(e,t,n){const a=new Date(0);a.setUTCFullYear(e,0,4);const s=a.getUTCDay()||7,r=(t-1)*7+n+1-s;return a.setUTCDate(a.getUTCDate()+r),a}const Ye=[31,null,31,30,31,30,31,31,30,31,30,31];function X(e){return e%400===0||e%4===0&&e%100!==0}function ze(e,t,n){return t>=0&&t<=11&&n>=1&&n<=(Ye[t]||(X(e)?29:28))}function Ue(e,t){return t>=1&&t<=(X(e)?366:365)}function Me(e,t,n){return t>=1&&t<=53&&n>=0&&n<=6}function Ce(e,t,n){return e===24?t===0&&n===0:n>=0&&n<60&&t>=0&&t<60&&e>=0&&e<25}function Fe(e,t){return t>=0&&t<=59}var He=y("<option> </option>"),Oe=y('<form><label>市区町村: <div class="selectbox-3 svelte-p3gidp"><select multiple class="svelte-p3gidp"></select></div></label> <label style="display: block; margin-bottom: 10px;">価格: <input type="number" class="textbox-1 svelte-p3gidp"></label> <label>最大築年数: <input type="number" class="textbox-1 svelte-p3gidp"></label> <button type="submit" class="svelte-p3gidp">検索</button></form>');function je(e,t){K(t,!0);let n=I(C([])),a=B(t,"filteredHouses",15);E(async()=>{T(n,await be(),!0)});let s=I(C([])),r=I(5e6),c=I(200);function l(){a(d(n).filter(f=>{const k=d(s).length===0||d(s).includes(f.city),w=f.price<=d(r),S=he(new Date,_e(f.constructedAt+"-01"))<=d(c);return k&&w&&S}))}var o=Oe(),i=v(o),g=b(v(i)),m=v(g);O(m,21,()=>new Set(d(n).map(f=>f.city)),j,(f,k)=>{var w=He(),S={},ee=v(w,!0);u(w),M(()=>{S!==(S=d(k))&&(w.value=(w.__value=d(k))??""),H(ee,d(k))}),D(f,w)}),u(m),u(g),u(i);var p=b(i,2),h=b(v(p));$(h),u(p);var x=b(p,2),_=b(v(x));$(_),u(x),F(2),u(o),oe("submit",o,l),le(m,()=>d(s),f=>T(s,f)),W(h,()=>d(r),f=>T(r,f)),W(_,()=>d(c),f=>T(c,f)),D(e,o),L()}var Re=y('<div class="text-5xl md:text-7xl font-extrabold text-center py-8 text-shadow"><span class="text-blue-800">A</span><span class="text-black">K</span><span class="text-blue-800">I</span><span class="text-black">Y</span><span class="text-blue-800">A</span> <span class="mx-1"></span> <span class="text-black">S</span><span class="text-blue-800">I</span><span class="text-black">M</span><span class="text-black">U</span><span class="text-black">L</span><span class="text-blue-800">A</span><span class="text-black">T</span><span class="text-blue-800">I</span><span class="text-black">O</span><span class="text-black">N</span></div> <div class="grid grid-cols-1 md:grid-cols-2 gap-6 px-6 pb-10"><div class="bg-white rounded-2xl shadow-lg p-6 flex flex-col"><div class="text-3xl font-bold text-blue-900 mb-4">Search</div> <!></div> <div class="bg-white rounded-2xl shadow-lg p-6 flex flex-col"><div class="text-3xl font-bold text-blue-900 mb-4">Reform</div> <!> <div class="mt-6"><button class="bg-blue-800 text-white px-6 py-3 rounded-lg shadow hover:bg-blue-700 transition">Before/Afterへ進む</button></div></div> <div class="bg-white rounded-2xl shadow-lg p-6 flex flex-col"><div class="text-3xl font-bold text-blue-900 mb-4">Map</div> <div class="aspect-square rounded-lg overflow-hidden"><!></div></div> <div class="bg-white rounded-2xl shadow-lg p-6 flex flex-col"><div class="text-3xl font-bold text-blue-900 mb-4">Dashboard</div></div></div>',1);function Be(e){let t=I(C([]));const n=[{name:"水回り",items:["キッチン","風呂","トイレ","洗面所"]},{name:"屋内",items:["リビング","ダイニング","洋室","和室","廊下","階段"]},{name:"屋外",items:["庭","バルコニー","駐車場","外壁","屋根"]},{name:"その他",items:["収納","階段","窓"]}];var a=Re(),s=b(ae(a),2),r=v(s),c=b(v(r),2);je(c,{get filteredHouses(){return d(t)},set filteredHouses(p){T(t,p,!0)}}),u(r);var l=b(r,2),o=b(v(l),2);me(o,{categories:n}),F(2),u(l);var i=b(l,2),g=b(v(i),2),m=v(g);de(m,{get houses(){return d(t)}}),u(g),u(i),F(2),u(s),D(e,a)}export{Be as component};
